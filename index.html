<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Traffic Sign Detector</title>
 <script src="./tf.min.js"></script>

 <link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#2196f3">

 
<link rel="icon" type="image/png" href="icons/icon-192.png">

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="navbar">
  <div class="nav-left" style="display: flex;">
    <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
    <h1 class="app-title">Traffic Sign Detector</h1>
  </div>

  <div class="nav-right">
    <div class="settings-pill">
      <span class="pill-text">Safety Alerts</span>
      <label class="switch">
        <input type="checkbox" id="notifyToggle" onchange="toggleSafetyNotifications()">
        <span class="slider"></span>
      </label>
    </div>
  </div>
</nav>

<aside id="historySidebar" class="sidebar">
  <div class="sidebar-header">
    <h2>History</h2>
    <button class="close-btn" onclick="toggleSidebar()">√ó</button>
  </div>
  <div class="sidebar-content">
    <p class="sidebar-subtitle">Recent Detections</p>
    <div id="sidebarList" class="sidebar-list"></div>
  </div>
</aside>

  <div class="container">
    
    <div class="camera-wrapper">
      <div id="frameGuide" class="frame-guide">
        <div class="guide-box"><p>Align sign<br>Inside box</p></div>
      </div>
      <div id="scanOverlay" class="scan-overlay hidden">
        <div class="scanner"></div>
        <p>Scanning‚Ä¶ Hold steady</p>
      </div>
      
      <img id="cameraPreview" style="display:none;" />
      <video id="video" width="320" height="240" autoplay playsinline></video>
      <canvas id="canvas" width="320" height="240" style="display:none;"></canvas>
    </div>

    <div style="display:flex; justify-content: center; gap: 10px; margin-top: 15px;">
      <button onclick="startCamera()">Start Camera</button>
      <button id="scanBtn" onclick="startTimedCameraPrediction(4000, 250)">Scan (4s)</button>
    </div>

    <div id="uploadBlock" class="upload-block" onclick="document.getElementById('imageInput').click()">
      <input type="file" id="imageInput" accept="image/*" style="display:none" />
      <div id="uploadPlaceholder" class="upload-placeholder">
        <span class="upload-icon">üìÇ</span>
        <span class="upload-text-main">Click to Upload Image</span>
      </div>
      <img id="preview" class="upload-preview" style="display:none;" />
    </div>

    <img id="processedPreview" style="display:none;" />

    <div class="action-buttons">
      <button id="detectBtn" onclick="detectImage()" disabled>üîç Detect Sign</button>
      <button id="clearBtn" onclick="clearInput()" disabled>Clear</button>
    </div>

    <div id="resultContainer" class="result-container" style="display: none;">
  
  <h2 id="resultLabel" class="result-label">Detected Sign</h2>
  <p id="resultConfidence" class="result-conf">Confidence: --%</p>

  <div class="comparison-box">
    <p class="sub-label">Official Sign:</p>
    <img id="refImage" src="./icons/icon-192.png" class="ref-image" alt="Standard Version">
  </div>

  <div class="info-box">
    <p id="refDescription">Safety instruction will appear here.</p>
  </div>

</div>

    

    <div class="action-buttons" style="margin-top: 20px; border-top: 1px solid #333; padding-top: 20px;">
      <button class="secondary-btn" onclick="stopCamera()">Stop Camera</button>
      <button class="secondary-btn" onclick="refreshPage()">Refresh App</button>
    </div>

  </div> 
  
  <script src="safety-logic.js"></script>
  <script src="script.js"></script>
</body>

</html>
